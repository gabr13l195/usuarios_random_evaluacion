{% extends 'users/base.html' %}

{% block title %}Lista de Usuarios - Usuarios Aleatorios{% endblock %}

{% block content %}
<!-- Formulario de bÃºsqueda -->
{% if search_form %}
<div class="user-card" style="margin-bottom: 30px;">
    <h3 style="color: #45b7d1; margin-bottom: 20px; text-align: center;">BÃºsqueda de Usuarios</h3>
    <form method="get" style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap; justify-content: center;">
        {{ search_form.as_p }}
        <button type="submit" class="btn" style="background: linear-gradient(45deg, #45b7d1, #4ecdc4);">
            Buscar
        </button>
        <a href="{% url 'user_list' %}" class="btn" style="background: linear-gradient(45deg, #ff6b6b, #ff8e8e);">
            Limpiar
        </a>
    </form>
</div>
{% endif %}

<div class="user-grid">
    {% for user in users %}
    <div class="user-card">
        <a href="{% url 'user_detail' user.uuid %}" style="text-decoration: none; color: inherit;">
            <div class="user-image">
                {% if user.picture and user.picture.medium %}
                    <img src="{{ user.picture.medium }}" alt="{{ user.full_name }}" loading="lazy">
                {% else %}
                    <span>ðŸ‘¤</span>
                {% endif %}
            </div>
            <div class="user-name">{{ user.full_name }}</div>
            <div class="user-info">{{ user.email }}</div>
            <div class="user-info">{{ user.location }}</div>
            <div class="user-info">{{ user.age }} aÃ±os â€¢ {{ user.gender|title }}</div>
        </a>
    </div>
    {% empty %}
    <div class="no-users">
        <p>No se encontraron usuarios.</p>
        <a href="{% url 'refresh_users' %}" class="btn btn-success" style="margin-top: 20px;">
            Cargar Usuarios desde la API
        </a>
    </div>
    {% endfor %}
</div>

{% if page_obj.has_other_pages %}
<div class="pagination">
    {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; Primera</a>
        <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
    {% endif %}

    <span class="current">
        PÃ¡gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Siguiente</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">Ãšltima &raquo;</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
